@model List<OrchardLite.Web.Models.ContentItem>
@{
    ViewBag.Title = "Home";
    var isTransformed = ViewBag.DotNetVersion.ToString().Contains(".NET 8");
    var isAurora = ViewBag.DatabaseType.ToString().Contains("Aurora");
    var dbHost = ViewBag.DbHost.ToString().ToLower();
    var isPrivateNetwork = dbHost.Contains("cluster") || dbHost.Contains("aurora");
}

<div class="alert alert-warning">
    <h5><i class="fas fa-exclamation-triangle text-warning"></i> License Compliance Warning</h5>
    <p class="mb-0"><strong>Notice:</strong> This application contains GPL and AGPL licensed components that may require source code disclosure. <strong>Compliance review recommended before production deployment.</strong></p>
</div>

@if (!isPrivateNetwork)
{
    <div class="alert alert-danger">
        <h5><i class="fas fa-shield-alt text-danger"></i> Network Security Warning</h5>
        <p class="mb-0"><strong>Critical:</strong> Database and application deployed in <strong>public subnets with direct internet access</strong>. This configuration violates security best practices and requires immediate network isolation.</p>
    </div>
}
else
{
    <div class="alert alert-success">
        <h5><i class="fas fa-shield-alt text-success"></i> Network Security Compliant</h5>
        <p class="mb-0"><strong>Secured:</strong> Database and application deployed in <strong>private subnets with NAT gateway</strong>. Network isolation implemented following security best practices.</p>
    </div>
}

<div class="row">
    <div class="col-md-8">
        <h1>Welcome to OrchardLite CMS</h1>
        <p class="lead">Enterprise Content Management System</p>
        
        <div class="alert alert-success">
            <h5><i class="fas fa-check-circle"></i> Database Connected</h5>
            <p><strong>Database:</strong> @ViewBag.DbHost:@ViewBag.DbPort</p>
            <p><strong>Total Records:</strong> @ViewBag.TotalRecords</p>
            <p><strong>Platform:</strong> ECS Fargate</p>
        </div>
        
        <div class="d-flex justify-content-between align-items-center mb-3">
            <h3>Content Items</h3>
            <a href="/all-content" class="btn btn-sm" style="background-color: #FF9900; border-color: #FF9900; color: white;">
                <i class="fas fa-list"></i> View All @ViewBag.TotalRecords Records
            </a>
        </div>
        
        <div class="row">
            @foreach (var post in Model)
            {
                <div class="col-md-6 mb-3">
                    <div class="card">
                        <div class="card-body">
                            <h6 class="card-title">@post.Title</h6>
                            <p class="card-text small">@(string.IsNullOrEmpty(post.Summary) ? "No summary available" : post.Summary)</p>
                            <small class="text-muted">
                                <i class="fas fa-calendar"></i> @post.PublishedDate.ToShortDateString()
                                <i class="fas fa-eye ms-2"></i> @post.ViewCount
                            </small>
                        </div>
                    </div>
                </div>
            }
        </div>
        
        <div class="text-center mt-3">
            <small class="text-muted">Showing latest 20 of @ViewBag.TotalRecords total records</small>
        </div>
    </div>
    
    <div class="col-md-4">
        <div class="card">
            <div class="card-header text-white" style="background-color: #232F3E;">
                <h5><i class="fas fa-info-circle" style="color: #FF9900;"></i> System Information</h5>
            </div>
            <div class="card-body">
                <ul class="list-unstyled">
                    <li><strong>Framework:</strong> <span class="@(isTransformed ? "text-success" : "text-danger")">@ViewBag.DotNetVersion</span></li>
                    <li><strong>Platform:</strong> ECS Fargate</li>
                    <li><strong>Database:</strong> <span class="@(isAurora ? "text-success" : "text-danger")">@ViewBag.DatabaseType</span></li>
                    <li><strong>Network:</strong> <span class="@(isPrivateNetwork ? "text-success" : "text-danger")">@(isPrivateNetwork ? "Private Subnets with NAT" : "Public Subnets Only")</span></li>
                    <li><strong>Records:</strong> @ViewBag.TotalRecords</li>
                </ul>
            </div>
        </div>
        
        <div class="card mt-3">
            <div class="card-header text-white" style="background-color: @(isTransformed && isAurora && isPrivateNetwork ? "#28a745" : "#dc3545");">
                <h5><i class="fas @(isTransformed && isAurora && isPrivateNetwork ? "fa-check-circle" : "fa-exclamation-triangle")"></i> @(isTransformed && isAurora && isPrivateNetwork ? "Issues Resolved" : "Issues Detected")</h5>
            </div>
            <div class="card-body">
                <ul class="list-unstyled small">
                    <li><i class="fas @(isTransformed ? "fa-check text-success" : "fa-times text-danger")"></i> @(isTransformed ? ".NET 8.0 Modern Framework" : "Legacy .NET Core 3.1")</li>
                    <li><i class="fas @(isAurora ? "fa-check text-success" : "fa-times text-danger")"></i> @(isAurora ? "Aurora Serverless v2 (Scalable)" : "Single-instance database")</li>
                    <li><i class="fas @(isPrivateNetwork ? "fa-check text-success" : "fa-times text-danger")"></i> @(isPrivateNetwork ? "Database in private subnet" : "Database in public subnet")</li>
                    <li><i class="fas fa-times text-warning"></i> GPL-licensed components</li>
                    <li><i class="fas @(isTransformed ? "fa-check text-success" : "fa-times text-danger")"></i> @(isTransformed ? "Automated CI/CD pipeline" : "Manual deployments")</li>
                    @if (isTransformed && isAurora && isPrivateNetwork)
                    {
                        <li><small class="text-success">Modernization complete!</small></li>
                    }
                    else
                    {
                        <li><small class="text-muted">Modernization required</small></li>
                    }
                </ul>
            </div>
        </div>
        
        <div class="card mt-3">
            <div class="card-header text-white" style="background-color: #FF9900;">
                <h5><i class="fas fa-check-circle"></i> Setup Complete</h5>
            </div>
            <div class="card-body">
                <ul class="list-unstyled">
                    <li><i class="fas fa-check text-success"></i> @(isAurora ? "Aurora Serverless Database" : "RDS MySQL Database")</li>
                    <li><i class="fas fa-check text-success"></i> ECS Fargate Application</li>
                    <li><i class="fas fa-check text-success"></i> Load Balancer & Networking</li>
                    <li><i class="fas fa-check text-success"></i> @(isPrivateNetwork ? "Private Subnet Deployment" : "Sample Data Created")</li>
                    @if (isTransformed)
                    {
                        <li><i class="fas fa-check text-success"></i> CI/CD Pipeline Active</li>
                    }
                </ul>
            </div>
        </div>
    </div>
</div>
